<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
<div class="col-md-6 col-sm-6  ">
    <div class="x_panel">
        <div class="x_title">
            <h2>Editar Contacto
                <!--<small>Los centros de costos es una agrupacion para las categorias</small>-->
            </h2>
            <ul class="nav navbar-right panel_toolbox">
				<li><a onclick="window.history.go(-1); return false;"><i class="fa fa-arrow-circle-left"></i> Volver</a></li>
			</ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <form name="vContacto" id="uptContacto" name="uptContacto" action="/contacto/uptContacto" method="POST">
                <div class="panel-body">
				    <table width="100%">
					    <tr>
						    <td style="padding-right:5px;" align=right>Nombre</td>
						    <td colspan="3"> 
								<input class="form-control" value="{{contacto.name}}" id="iNombreContacto" name="iNombreContacto"> 
						    </td>
 				        </tr>
 				    <tr>
 				    	<td style="padding-right:5px;" align="right"> Dirección </td>
 				    	<td> 
 				    		<input class="form-control" placeholder="Direccion Contancto" id="iDireccionContacto" name="iDireccionContacto" value="{{contacto.address1}}"> 
 				    	</td>
 				    	<td style="padding-right:5px;" align="right"> Teléfono</td>
 				    	<td> 
 				    		<input class="form-control" placeholder="Telefono Contancto " id="iTelefonoContacto" name="iTelefonoContacto" value="{{contacto.phone}}">  
 				    	</td>
 				    </tr>
 				    <tr>
 				    	<td style="padding-right:5px;" align=right> Tipo </td>
 				    	<td style="width:30%">
 				    		<table >
 				    			<tr>
 				    				<td colspan="2">
			 				    		<select class="form-control" name="iTipoContacto" id="iTipoContacto">
											  {{#each tipo_contacto}}
											   		{{#if (if_equal id ../contacto.grupo) }}
													   <option value="{{id}}" selected>{{descripcion}}</option>
													{{else}}
														<option value="{{id}}">{{descripcion}}</option>
													{{/if}}
											  		
											   {{/each}}    
					                  	</select>
					                </td> 		
			                  	</tr>
		                  	</table>
				    	</td>
 				    	<td style="padding-right:5px;" align=right> Móvil</td>
 				    	<td> 
 				    		<input class="form-control" placeholder="Movil Contancto" id="iMovilContacto" name="iMovilContacto" value="{{contacto.movil}}"> 
 				    	</td>
 				    </tr>
 				    <tr>
 				    	<td style="padding-right:5px;" align=right> URL</td>
 				    	<td>
 				    		<input class="form-control" placeholder="URL Contancto" id="iUrlContacto" name="iUrlContacto" value="{{contacto.url}}"> 
 				    	</td>
 				    	<td style="padding-right:5px;" align=right> E-mail</td>
 				    	<td> 
 				    		<input class="form-control" placeholder="Email Contancto" id="iMailContacto" name="iMailContacto" value="{{contacto.email}}"> 
 				    	</td>
 				    </tr>
					<tr>
						<td colspan="4">&nbsp;</td>
					</tr>
 				    <tr>
 				    	<td style="padding-right:5px;" align="right"> Categoría:</td>
 				    	<td colspan="3">
 				    		<div class="form-group" style="margin-bottom: 0px;">
                            	<div class="checkbox">
                            	    <label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="1" {{contacto.arquitecto}}> Arquitecto</label>
                                    <label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="2" {{contacto.constructora}}> Constructora</label>
                                    <label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="3" {{contacto.ito}}> ITO</label>
                                    <label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="4" {{contacto.inmobiliaria}}> Inmobiliaria</label>                                   
									<label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="5" {{contacto.mecsuelo}}> Mec. Suelo</label>
                                    <label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="6" {{contacto.postensado}}> Postensado</label>
                                    <label class="checkbox"><input type="checkbox" name="concepto[]" id="concepto" value="7" {{contacto.murocortina}}> Muro Cortina</label>
                                </div>
                           </div>
 				    	</td>
 				    </tr>
 				    <tr>
 				    	<td style="padding-right:5px;" align=right> Comentario</td>
 				    	<td colspan=3>
 				    		<textarea class="form-control" name="iComentarioContacto" id="iComentarioContacto" rows="2">{{contacto.comments}}</textarea>
 				    	</td>

 				    </tr>
 				    <tr style="padding-top:2%;">
 				    	<td colspan=4 align=center style="padding-top:2%;"> 
							 <input type="hidden" name="id" id="id" value="{{contacto.id}}">
							 <input type="hidden" name="categorias" id="categorias" value="">
 				    		<button type="button" class="btn btn-success" onclick="ActualizarContacto();">Actualizar Contacto</button>
 				    	</td>
 				    </tr>
				</table>
            </div>
        </div>														
	</form>
        </div>
    </div>
</div>

<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script>
 function ActualizarContacto ()
{
	/*
	var obj	= creaObjetoContacto();
	
	var TableContactoForm = '';
	$.ajax
		(
			{
				async: false,
				type : 'POST', 
				url	 : "/contacto/uptContacto", 
				data : obj,
					success : function (resultado) 
						{ 
							TableContactoForm = resultado; 
							
						} 
			}
		);
		*/
		var concepto = "";
				$('input[name="concepto[]"]:checked').each(function() {
					concepto += $(this).val() + ",";
				});
			//	alert(concepto);
	$("#categorias").val(concepto);
	document.getElementById("uptContacto").submit();


}	
	
function creaObjetoContacto ()
{
	var obj = new Object();
		var nombre 		    	= $( "#iNombreContacto" );
		var direccion	   	 	= $( "#iDireccionContacto" );
		var telefono	    	= $( "#iTelefonoContacto" );
		var tipo_conctacto  	= $( "#iTipoContacto" );
		var movil	    		= $( "#iMovilContacto" );
		var url   				= $( "#iUrlContacto" );
		var e_mail 				= $( "#iMailContacto" );
		var comentario			= $( "#iComentarioContacto" );
		var id					= $( "#id" );
		//var concepto			= $( "#concepto" );
		var concepto = "";
				$('input[name="concepto[]"]:checked').each(function() {
					concepto += $(this).val() + ",";
				});
	
	obj.nombre			= nombre.val(); 
	obj.direccion		= direccion.val(); 
	obj.telefono		= telefono.val(); 
	obj.tipo_conctacto	= tipo_conctacto.val(); 
	obj.movil			= movil.val(); 
	obj.url				= url.val(); 
	obj.e_mail			= e_mail.val(); 
	obj.comentario		= comentario.val(); 
	obj.concepto		= concepto; 
	obj.id				= id.val(); 
	obj.action			= 'ajax'; 
	obj.object			= 'actualizarContacto'; 
	
	return obj;	
}
    </script>

{{#if verToask }}
<!--INFORMACIÓN-->
<script>
    if ("{{verToask.tipo}}" == "Editar") {
        toastr.warning('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }
    else if ("{{verToask.tipo}}" == "Crear") {
        toastr.success('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }
    else if ("{{verToask.tipo}}" == "Eliminar") {
        toastr.error('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }

</script>
{{/if}}
