<style>
   .dataTables_filter{
	    position: relative;
  		float: left;
   }
   .dataTables_length{
	    position: relative;
  		float: right;
   }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">


<div class="col-md-12">
          <div class="x_panel">
            <div class="x_title">
                 <h2><small>{{proyecto.year}}-{{proyecto.code}} : {{proyecto.nombre}}</small></h2>
                  <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <div class="row">
                    <div class="col-md-3">
                        <div class="alert alert-secondary" role="alert">
                            Agregar divisiones a la metodologia de pago, en caso que solo sea un edificio unitario se tomara como N/A.
                            Ejemplo de divisiones : Torre A , Torre B , Placa
                        </div>
                    </div>
                    <div class="col-md-3">
                        <form id="cargaNombre" action="#" method="POST">
                            <div class="item form-group">
					            <label class="col-form-label col-md-3 col-sm-3 label-align" for="titulo">Presupuestos</label>
                                <div class="col-md-7">
									<select class="form-control" name="cargaPresupuesto" id="cargaPresupuesto">
                                            <option value="0">Seleccione</option>   
                                            {{#each presupuestos}}
                                                <option value="{{id_presupuesto}}">{{codigo}}</option>   
                                             {{/each}}     
                                    </select>	
								</div>
                                <div class="col-md-2">
									
								</div>
                            </div>
                            <div class="item form-group">
					            <label class="col-form-label col-md-3 col-sm-3 label-align" for="titulo">Nombre</label>
                                <div class="col-md-7">
										<input type="text" id="nombre" name="nombre" required="required" class="form-control">
								</div>
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-success" onclick="cargaNombreCobro()">Agregar</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>  
            </div>
          </div>
</div>

<div class="col-md-5">
    <div class="x_panel">
        <div class="x_title">
            <h2>Ingresar un cobro o Metodologia</h2>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class="item form-group">
					<label class="col-form-label col-md-3 col-sm-3 label-align" for="titulo">Tipo Cobro<span class="required"></span> </label>
					<div class="col-md-6 col-sm-6 ">
						<select class="form-control" name="presupuesto" id="presupuesto" onchange="cargaOpcionCobro(this.value);">
                                <option value="0">Seleccione</option>        
                                <option value="1">Metodologia de pago</option>
                                <option value="2">Cobro Adicional</option>
                        </select>
					</div>
			</div>
        </div>
    </div>
</div>
<div class="col-md-7">
    <div class="x_panel">
        <div class="x_title">
            <h2> Listado de cobros</h2>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            Lsitar todos los cobros ingresar en el sistema.
        </div>
    </div>
</div>

<!-- Optional JavaScript; choose one of the two! -->


<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>-->

<script src="../../../template/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../../../template/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script> 
<script src="../../../template/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>



{{#if verToask }}
<!--INFORMACIÓN-->
<script>
    if ("{{verToask.tipo}}" == "Editar") {
        toastr.warning('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }
    else if ("{{verToask.tipo}}" == "Crear") {
        toastr.success('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }
    else if ("{{verToask.tipo}}" == "Eliminar") {
        toastr.error('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }
    else if ("{{verToask.tipo}}" == "Permisos") {
        toastr.success('{{verToask.body}}', '{{verToask.titulo}}', {
            "progressBar": true
        });
    }



</script>
{{/if}}

<script>
        var table = $('#tablaProyectos').DataTable({
            "dom": "<'row'<'col-sm-12 col-md-6'f><'col-sm-12 col-md-6'l>>" +
                "<'row'<'col-sm-12'tr>>" +
                "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
            "order": [[ 0, "desc" ]],
            orderCellsTop: true,
            fixedHeader: true,
            "scrollX": true,
            language: {
                "decimal": ".",
                "thousands": ",",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            }
        });


function cargaOpcionCobro( opcion)
{
    // cargar informacion 
    alert(opcion);
    switch(opcion)
    {
        case 2:// cobros adicionales 
            
        break;

    }
}

function cargaNombreCobro()
{

     let nombre  = $("#nombre").val();

    let informacion = { 
        nombre : nombre,
        idppto : 1234
    };

    console.log(informacion);

         
         $.ajax({
              type: 'post',
              //url: '/finanzas/ocCambioEstado',
              url: '/finanzas/cargaNombreSub',
              data: informacion,
              dataType: 'text'
               })
              .done(function (data) {
                if (data)
                {
                    //$(location).attr('href','/solicitudes/aordencompra?a=1');
                }
              });

}

</script>