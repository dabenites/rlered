<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!-- <link rel="stylesheet" href="/resources/demos/style.css"> -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">


</head>

<body>
    <div class="col-md-7 col-sm-7  ">
        <div class="x_panel">
            <div class="x_title">
                <h2>Proveedores de Orden Compra</h2>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Rut</th>
                            <th>Razon Social</th>
                            <th>Dirección</th>
                            <th>Opcion</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#if proveedor }}
                            {{#each proveedores}}
                                <tr>
                                   <td>{{rut}}</td>
                                        <td>{{razon_social}}</td>
                                        <td>{{direccion}}</td>
                                    <td>
                                        <div class="btn-group" role="group" aria-label="Basic example">
                                            <button type="button" class="btn btn-secondary btn-sm"><a type="button"href="../../ocproveedor/edit/{{id}}" style="color: white;"> Editar </a></button>
                                            <button type="button" class="btn btn-danger btn-sm"><a type="button" href="../../ocproveedor/delete/{{id}}" style="color: white;"
                                            onclick="return confirm('¿Esta seguro de borrar el proveedor de oc {{razon_social}} ?')">Borrar</a></button>
                                        </div>
                                    </td>
                                </tr>
                            {{/each}}
                        {{else}}
                            {{#if verToask }}
                                {{#each proveedores}}
                                    <tr>
                                        <td>{{rut}}</td>
                                        <td>{{razon_social}}</td>
                                        <td>{{direccion}}</td>
                                        <td>
                                            <div class="btn-group" role="group" aria-label="Basic example">
                                                <button type="button" class="btn btn-secondary btn-sm"><a type="button"href="../../mantenedores/ocproveedor/edit/{{id}}" style="color: white;"> Editar </a></button>
                                                <button type="button" class="btn btn-danger btn-sm"><a type="button" href="../../mantenedores/ocproveedor/delete/{{id}}" style="color: white;"
                                                onclick="return confirm('¿Esta seguro de borrar el proveedor de oc {{razon_social}} ?')">Borrar</a></button>
                                            </div>
                                        </td>
                                    </tr>
                                {{/each}}
                            {{else}}
                                {{#each proveedores}}
                                    <tr>
                                        <td>{{rut}}</td>
                                        <td>{{razon_social}}</td>
                                        <td>{{direccion}}</td>
                                        <td>
                                            <div class="btn-group" role="group" aria-label="Basic example">
                                                <button type="button" class="btn btn-secondary btn-sm"><a type="button"href="ocproveedor/edit/{{id}}" style="color: white;"> Editar </a></button>
                                                <button type="button" class="btn btn-danger btn-sm"><a type="button" href="ocproveedor/delete/{{id}}" style="color: white;" onclick="return confirm('¿Esta seguro de borrar el proveedor de oc {{razon_social}} ?')">Borrar</a></button>
                                            </div>
                                        </td>
                                    </tr>
                                {{/each}}
                            {{/if}}
                        {{/if}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-md-5 ">
        <div class="x_panel">
            <div class="x_title">
                {{#if proveedor }}
                <h2>Actualizar Proveedor Orden Compra <small>{{proveedor.razon_social}}</small></h2>
                {{else}}
                <h2>Registrar Proveedor Orden Compra
                    <!--<small>Se podra seleccionar el pais en el ingreso de un proyecto</small>-->
                </h2>
                {{/if}}

                <div class="clearfix"></div>
            </div>
            <div class="x_content">

                <!-- start form for validation -->
                {{#if proveedor }}
                     <form id="demo-form" data-parsley-validate action="/mantenedores/editOcProveedor" method="POST">
                {{else}}
                    <form id="demo-form" data-parsley-validate action="/mantenedores/addOcProveedor" method="POST">
                        {{/if}}

                        {{#if proveedor }}
                        <label for="ID Pais">Id Proveedor Orden Compra :</label>
                        <input type="text" id="id" class="form-control" value="{{proveedor.id}}" name="id" readonly />
                        {{/if}}
                        <label for="">Rut :</label>
                        <input type="text" id="rut" class="form-control" value="{{proveedor.rut}}" name="rut" required />
                        <label for="">Razon Social :</label>
                        <input type="text" id="razon_social" class="form-control" value="{{proveedor.razon_social}}" name="razon_social" required />
                        <label for="">Direccion :</label>
                        <input type="text" id="direccion" class="form-control" value="{{proveedor.direccion}}" name="direccion" required />

                        <br />
                       
                        	<div class="form-group row">
                                    <div class="col-md-5 col-sm-5 ">

                                    </div>
                                    <div class="col-md-4 col-sm-4 ">
                                    {{#if proveedor }}
                                    <button type="submit" class="btn btn-warning btn-block">
                                        Actualizar
                                    </button>
                                    {{else}}
                                    
                                    <button type="button" onclick="validarIngreso();" class="btn btn-warning btn-block">
                                        Ingresar
                                    </button>
                                    {{/if}}
                                    </div>
                            </div>

                    </form>
                    <!-- end form for validations -->
                </form>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>


    {{#if verToask }}
    <!--INFORMACIÓN-->
    <script>
        if ("{{verToask.tipo}}" == "Editar") {
            toastr.warning('{{verToask.body}}', '{{verToask.titulo}}', {
                "progressBar": true
            });
        }
        else if ("{{verToask.tipo}}" == "Crear") {
            toastr.success('{{verToask.body}}', '{{verToask.titulo}}', {
                "progressBar": true
            });
        }
        else if ("{{verToask.tipo}}" == "Eliminar") {
            toastr.error('{{verToask.body}}', '{{verToask.titulo}}', {
                "progressBar": true
            });
        }

    </script>
    {{/if}}

</body>

</html>

<script>

function validarIngreso ()
{

     var rut = $("#rut").val();
     var razon_social = $("#razon_social").val();
     var direccion = $("#direccion").val();
    
    if (rut === "" || razon_social === "" || direccion === "")
    {
        alert("Todos los campos son necesarios");
    }
    else
    {
        document.getElementById("demo-form").submit();
        /*
        namePais = $("#demo-form").serialize();

        $.ajax({
            method:'POST',
            url : '/mantenedores/ajax-validarNombrePais',
            data : namePais,
            success : function(result)
            {
                //alert(result);
                if(!$.trim(result)){
                    // no existe resultado esta en lo correcto
                    document.getElementById("demo-form").submit();
                }
                else{
                    toastr.warning('warning', 'No se pueden cargar Pais con el mismo nombre.', {
                "progressBar": true
                    });
                }
            }
            });
            */
    }
  
}

</script>